ins 1:
    "freq" {440 1 22000}

outs 1
 
init:
    samplerate_minus_one = samplerate - 1.0
    twopi = 2 * PI
    phase = 0.0

perform:
    frequency Signal #aka float
    sine_out  Signal
    
    sample:
        frequency = abs(in1)

        increment = frequency / samplerate_minus_one

        sine_out = cos(phase * twopi)
        
        out1 = sine_out

        phase += increment
        phase = phase % 1.0